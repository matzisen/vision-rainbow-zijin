import{_ as D,r as p,D as L,o as S,c as M,d as m,e,f as o,w as h,g as n,u as A,S as O,h as c,z as V,A as I,b as K,j as N,t as l,n as T,s as U}from"./index-Drt15aFz.js";const W={class:"page-wrapper"},j={class:"content-card"},E={class:"card-header"},q={class:"right-panel"},F={class:"search-capsule"},G={class:"table-container"},H={class:"mono-code"},J={class:"p-cell"},P=["src"],Q={class:"p-name"},R={class:"flow-chart"},X={class:"node"},Y={class:"tip-name"},Z={class:"link-line"},$={class:"node"},ee={class:"tip-name"},te={class:"money-text"},ae={class:"date-text"},se={class:"pagination-footer"},g="https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",oe={__name:"OrderManagement",setup(ne){const d=p(!1),u=p([]),i=p(""),b=t=>t?t.startsWith("http")?t.replace("localhost","127.0.0.1"):"http://127.0.0.1:8081"+t:"",_=async()=>{d.value=!0;try{const t=localStorage.getItem("admin_token"),a=await U.get("/api/admin/orders",{headers:{Authorization:t}});u.value=a.data||[]}catch(t){console.error(t)}finally{d.value=!1}},f=L(()=>{if(!i.value)return u.value;const t=i.value.toLowerCase();return u.value.filter(a=>a.order_no&&a.order_no.toLowerCase().includes(t)||a.product?.name&&a.product.name.toLowerCase().includes(t))}),w=t=>t?new Date(t).toLocaleString():"-",y=t=>({1:"待付款",2:"待发货",3:"运输中",4:"已完成",5:"已取消"})[t]||"未知状态",k=t=>t===1?"orange":t===4?"green":t===5?"gray":"blue";return S(_),(t,a)=>{const x=c("el-icon"),r=c("el-table-column"),v=c("el-avatar"),C=c("el-table"),z=c("el-pagination"),B=K("loading");return m(),M("div",W,[e("div",j,[e("div",E,[a[1]||(a[1]=e("div",{class:"left-panel"},[e("h2",{class:"page-title"},"订单中心"),e("span",{class:"subtitle"},"监控全平台交易链路与状态")],-1)),e("div",q,[e("div",F,[o(x,{class:"search-icon"},{default:n(()=>[o(A(O))]),_:1}),h(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>i.value=s),placeholder:"搜索订单号...",onKeyup:I(_,["enter"])},null,544),[[V,i.value]]),e("button",{onClick:_},"搜索")])])]),e("div",G,[h((m(),N(C,{data:f.value,style:{width:"100%"},"header-cell-style":{background:"#fff",color:"#8c9bae",fontWeight:"600",borderBottom:"1px solid #f0f0f0"},"cell-style":{borderBottom:"1px solid #f7f7f7"}},{default:n(()=>[o(r,{prop:"order_no",label:"订单号",width:"200"},{default:n(s=>[e("span",H,l(s.row.order_no),1)]),_:1}),o(r,{label:"商品","min-width":"220"},{default:n(s=>[e("div",J,[e("img",{src:b(s.row.product?.image),class:"p-thumb"},null,8,P),e("span",Q,l(s.row.product?.name||s.row.product?.title||"商品已失效"),1)])]),_:1}),o(r,{label:"交易链路","min-width":"280"},{default:n(s=>[e("div",R,[e("div",X,[o(v,{size:32,src:s.row.user?.avatar||g,class:"ava"},null,8,["src"]),a[2]||(a[2]=e("span",{class:"role-badge buy"},"买",-1)),e("div",Y,l(s.row.user?.username),1)]),e("div",Z,[a[3]||(a[3]=e("div",{class:"line-track"},null,-1)),e("div",{class:T(["status-bubble",k(s.row.status)])},l(y(s.row.status)),3)]),e("div",$,[o(v,{size:32,src:s.row.seller?.avatar||g,class:"ava"},null,8,["src"]),a[4]||(a[4]=e("span",{class:"role-badge sell"},"卖",-1)),e("div",ee,l(s.row.seller?.username||"未知"),1)])])]),_:1}),o(r,{label:"金额",width:"120",align:"center"},{default:n(s=>[e("span",te,"¥"+l(s.row.price),1)]),_:1}),o(r,{prop:"created_at",label:"创建时间",width:"180",align:"right"},{default:n(s=>[e("span",ae,l(w(s.row.created_at)),1)]),_:1})]),_:1},8,["data"])),[[B,d.value]])]),e("div",se,[o(z,{background:"",layout:"prev, pager, next",total:f.value.length,"page-size":10,disabled:""},null,8,["total"])])])])}}},re=D(oe,[["__scopeId","data-v-484c720f"]]);export{re as default};
